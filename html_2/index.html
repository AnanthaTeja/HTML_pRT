<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css" />
    <title>SGPA Calculator</title>
  </head>

  <body>
    <div class="main">
      <div class="navbar">
        <h1>
          SGPA / CGPA <span>Calculator</span>
          <div class="logo">
            <img src="AT3.jpeg" alt="DANT" />
          </div>
        </h1>
      </div>
      
      <table id="sgpaTable">
        <tr>
          <th>Subject</th>
          <th>Credits</th>
          <th>Grade Points</th>
        </tr>
         
        <tr>
          <td>
            <input type="text" name="subject[]" placeholder="Enter subject" />
          </td>
          <td>
            <input type="number" name="credits[]" placeholder="Enter credits" />
          </td>
          <td>
            <input
              type="text"
              name="gradePoints[]"
              placeholder="Enter grade points"
            />
          </td>
        </tr>
    
      </table>
      <div class="in">
        Number of Subjects : 
        <input id="inp" type="number" name="subs" placeholder="Enter number of subjects">
      </div>
      <p class="grades">
       
      <br />

        <button id="addButton">Add</button>

        <button id="calculateButton">Calculate SGPA/CGPA</button>
        <table id="grade">
          <tr>
            <th>Grade</th>
            <th>Score</th>
          </tr>
          <tr>
            <td>O</td>
            <td>10</td>
          </tr>
          <tr>
            <td>A+</td>
            <td>9</td>
          </tr>
          <tr>
            <td>A</td>
            <td>8</td>
          </tr>
          <tr>
            <td>B+</td>
            <td>7</td>
          </tr>
          <tr>
            <td>B</td>
            <td>6</td>
          </tr>
          <tr>
            <td>C+</td>
            <td>5</td>
          </tr>
          <tr>
            <td>C</td>
            <td>4</td>
          </tr>
        </table>
        
      </p>
      <div id="result"></div>

      <script>
        document
          .getElementById("addButton")
          .addEventListener("click", function () {
            var table = document.getElementById("sgpaTable");
            var numSubjects = parseInt(document.getElementById("inp").value);
            if(numSubjects==0){
              numSubjects=2;
            }
            document.getElementById("inp").addEventListener("input", function() {

  location.reload();
});
            for (var i = 0; i < numSubjects-1; i++) {
              var row = table.insertRow(table.rows.length); // Insert before the last row
              
              var subjectCell = row.insertCell(0);
              var creditsCell = row.insertCell(1);
              var gradePointsCell = row.insertCell(2);

              subjectCell.innerHTML =
                '<input type="text" name="subject[]" placeholder="Enter subject">';
              creditsCell.innerHTML =
                '<input type="number" name="credits[]" placeholder="Enter credits">';
              gradePointsCell.innerHTML =
                '<input type="text" name="gradePoints[]" placeholder="Enter grade points">';
            }
          });

        document
          .getElementById("calculateButton")
          .addEventListener("click", function () {
            var table = document.getElementById("sgpaTable");
            var subjects = table.querySelectorAll('input[name="subject[]"]');
            var credits = table.querySelectorAll('input[name="credits[]"]');
            var gradePoints = table.querySelectorAll(
              'input[name="gradePoints[]"]'
            );

            var courseCredits = [];
            var courseGrades = [];

            for (var i = 0; i < subjects.length; i++) {
              courseCredits.push(parseInt(credits[i].value));
              courseGrades.push(gradePoints[i].value);
            }

            // Perform the SGPA calculation using the Java code here
            var sgpa = Java.performSGPA(courseCredits, courseGrades);

            // Display the result
            var resultDiv = document.getElementById("result");
            resultDiv.innerHTML = "SGPA: <strong>" + sgpa + "</strong>";
          });
      </script>

      <script>
        var Java = {
          performSGPA: function (credits, grades) {
            var gradePoints = {
              O: 10,
              o: 10,
              "a+": 9,
              "A+": 9,
              A: 8,
              a: 8,
              "B+": 7,
              "b+": 7,
              B: 6,
              b: 6,
              "C+": 5,
              "c+": 5,
              C: 4,
              c: 4,

              // Add more grades and corresponding grade points if needed
            };

            var totalGradePoints = 0;
            var totalCredits = 0;

            for (var i = 0; i < credits.length; i++) {
              totalGradePoints += credits[i] * gradePoints[grades[i]];
              totalCredits += credits[i];
            }

            var sgpa = totalGradePoints / totalCredits;

            return sgpa;
          },
        };
      </script>
    </div>
  </body>
</html>